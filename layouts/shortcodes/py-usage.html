{{- /* Shortcode: render a single-line Python usage command pointing at the tool file. */ -}}
{{- $page := .Page -}}
{{- $params := $page.Params -}}

{{- $file := "" -}}
{{- with $params.toolbox }}{{- with .file }}{{- $file = . -}}{{- end -}}{{- end -}}
{{- if not $file -}}
  {{- with $params.tool }}{{- with .file }}{{- $file = . -}}{{- end -}}{{- end -}}
{{- end -}}
{{- if not $file -}}
  {{- $file = "tool.py" -}}
{{- end -}}

{{- $base := "" -}}
{{- with site.Params.url -}}
  {{- $base = . -}}
{{- end -}}
{{- if not $base -}}
  {{- $base = site.BaseURL | default "/" -}}
{{- end -}}
{{- $base = strings.TrimSuffix "/" $base -}}

{{- $url := "" -}}
{{- if or (hasPrefix $file "http://") (hasPrefix $file "https://") -}}
  {{- $url = $file -}}
{{- else if hasPrefix $file "/" -}}
  {{- $url = printf "%s%s" $base $file -}}
  {{- else -}}
  {{- $rel := $page.RelPermalink -}}
  {{- $rel = strings.TrimSuffix "/" $rel -}}
  {{- $url = printf "%s%s/%s" $base $rel $file -}}
{{- end -}}
‚ùØ uv run "{{ $url }}"
